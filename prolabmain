#include <allegro.h>
 
void Baslat();
void Bitir();
 
int main() {
Baslat();
int cinsiyet=2,menu=5,k,knum=0,r,ksec=0;
char s;

    BITMAP *arakatman=create_bitmap(960,540);
    BITMAP *arakatman2=create_bitmap(760,480);
    BITMAP *arakatman3=create_bitmap(263,480);
	BITMAP *ckatman=create_bitmap(64,44);
    BITMAP *b1=load_bitmap("yeni.bmp",NULL);
    BITMAP *b2=load_bitmap("sef.bmp",NULL);
    BITMAP *b3=load_bitmap("sorg.bmp",NULL);
    BITMAP *bck=load_bitmap("bck.bmp",NULL);
    BITMAP *ext=load_bitmap("ext.bmp",NULL);
    BITMAP *b1h=load_bitmap("yenih.bmp",NULL);
    BITMAP *b2h=load_bitmap("sefh.bmp",NULL);
    BITMAP *b3h=load_bitmap("sorgh.bmp",NULL);
    BITMAP *ttl=load_bitmap("title.bmp",NULL);
	BITMAP *ttl1=load_bitmap("title1.bmp",NULL);
    BITMAP *sttl=load_bitmap("stitle.bmp",NULL);
    BITMAP *sfttl=load_bitmap("sftitle.bmp",NULL);
    BITMAP *e=load_bitmap("e.bmp",NULL);
    BITMAP *b=load_bitmap("b.bmp",NULL);
    BITMAP *eh=load_bitmap("eh.bmp",NULL);
    BITMAP *bh=load_bitmap("bh.bmp",NULL);
    BITMAP *oto=load_bitmap("otobus.bmp",NULL);
    BITMAP *srgl=load_bitmap("srgl.bmp",NULL);
    BITMAP *ke=load_bitmap("ke.bmp",NULL);
    BITMAP *kb=load_bitmap("kb.bmp",NULL);
	BITMAP *p=load_bitmap("p.bmp",NULL);
	BITMAP *snr=load_bitmap("snr.bmp",NULL);
	BITMAP *ony=load_bitmap("ony.bmp",NULL);
	BITMAP *blt=load_bitmap("blt.bmp",NULL);

    show_mouse(screen);

    clear_to_color(arakatman,makecol(29,29,29));
    clear_to_color(arakatman2,makecol(29,29,29)); /*arakatman2 butonlara bastığımızda sadece sağ kısımdaki doldurulan alanın sıfırlanması için */
	clear_to_color(ckatman,makecol(29,29,29)); 
	clear_to_color(arakatman3,makecol(29,29,29));
	

	while (!key[KEY_ESC]) {
				
				blit(p,arakatman,0,0,20,400,50,50); /* olası hata durumunda debug testi için */
	
			    blit(bck,arakatman,0,0,0,0,960,60);
                blit(b1,arakatman,0,0,15,75,85,85);
                blit(b2,arakatman,0,0,15,167,85,85);
                blit(b3,arakatman,0,0,15,258,85,85);

                /////////kod yazarken mouse kordinatı yardımcısı & koltuk numarası bildirici/////
                textprintf_ex(arakatman, font, 100, 0, makecol(255, 255, 255),-1, "x: %d y: %d", mouse_x,mouse_y);
                textprintf_ex(arakatman, font, 300, 0, makecol(255, 255, 255),-1, "koltuk: %d ", knum);

                //********************mouse tıklamalar********************//
                if(!(mouse_b & 1) && mouse_x>900 && mouse_x<960 && mouse_y>0 && mouse_y<60)
                {
                        blit(ext,arakatman,0,0,895,0,60,60);
                }
                if((mouse_b & 1) && mouse_x>900 && mouse_x<960 && mouse_y>0 && mouse_y<60)
				{
                return 0;
                }
				///ilk bölüm/////
				if((mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>75 && mouse_y<160)
                {
                        menu=0;
                        clear_to_color(arakatman2,makecol(29,29,29));
						clear_to_color(ckatman,makecol(29,29,29));
						clear_to_color(arakatman3,makecol(29,29,29));
						blit(snr,arakatman3,0,0,150,430,85,28); 
                        blit(ttl1,arakatman2,0,0,0,0,120,260);
                }
				//////////yeni/////////
                if(!(mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>75 && mouse_y<160)
                {
                        blit(b1h,arakatman,0,0,15,75,85,86);
                }
				
                if((mouse_b & 1) && mouse_x>845 && mouse_x<930 && mouse_y>490 && mouse_y<518 && menu==0)
                {
                        menu=1;
                        clear_to_color(arakatman2,makecol(29,29,29));
						clear_to_color(ckatman,makecol(29,29,29));
						clear_to_color(arakatman3,makecol(29,29,29));
                        blit(ttl,arakatman2,0,0,0,0,120,220);
                        blit(oto,arakatman3,0,0,0,0,263,480);
                        masked_blit(e,ckatman,0,0,0,0,32,44);
                        masked_blit(b,ckatman,0,0,32,0,32,44);
						blit(snr,arakatman2,0,0,390,430,85,28); 

                }
				if((mouse_b & 1) && mouse_x>585 && mouse_x<670 && mouse_y>490 && mouse_y<518 && menu==1)
                {
                        menu=-1;
                        clear_to_color(arakatman2,makecol(29,29,29));
						clear_to_color(ckatman,makecol(29,29,29));
						clear_to_color(arakatman3,makecol(29,29,29));
						blit(blt,arakatman2,0,0,0,160,500,281);
						blit(ony,arakatman3,0,0,150,430,85,28); 

                }
				if((mouse_b & 1) && mouse_x>845 && mouse_x<930 && mouse_y>490 && mouse_y<518 && menu==-1)
                {
					/*save_fonksiyonu();*/
				}
				
				
				
				//////////seferler/////////
                if(!(mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>168 && mouse_y<250)
                {

                        blit(b2h,arakatman,0,0,15,167,85,86);
                }
                if((mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>168 && mouse_y<250)
                {
                        menu=2;
                        clear_to_color(arakatman2,makecol(29,29,29));
						clear_to_color(ckatman,makecol(29,29,29));
						clear_to_color(arakatman3,makecol(29,29,29));
                        blit(sfttl,arakatman2,0,0,30,20,120,260);
                }
                //////////sorgula/////////
                if(!(mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>258 && mouse_y<328)
                {
                blit(b3h,arakatman,0,0,15,258,85,86);
                }
                if((mouse_b & 1) && mouse_x>15 && mouse_x<100 && mouse_y>258 && mouse_y<328)
                {
                        menu=3;
                        clear_to_color(arakatman2,makecol(29,29,29));
						clear_to_color(ckatman,makecol(29,29,29));
						clear_to_color(arakatman3,makecol(29,29,29));
                        blit(srgl,arakatman2,0,0,0,30,120,260);
                }
				///cinsiyet/////
                if((mouse_b & 1) && mouse_x>315 && mouse_x<347 && mouse_y>170 && mouse_y<214 && menu==1)
                {
						clear_to_color(ckatman,makecol(29,29,29));
                        masked_blit(eh,ckatman,0,0,0,0,32,44);
                        masked_blit(b,ckatman,0,0,32,0,32,44);
                        cinsiyet=1;
                }
                if((mouse_b & 1) && mouse_x>347 && mouse_x<379 && mouse_y>170 && mouse_y<214 && menu==1)
                {
						clear_to_color(ckatman,makecol(29,29,29));
                        masked_blit(bh,ckatman,0,0,32,0,32,44);
                        masked_blit(e,ckatman,0,0,0,0,32,44);
                        cinsiyet=0;
                }
                ///////cisiyet ekrana yazdır//////////////
                if(cinsiyet==1)
                {
                        textout_ex(arakatman,font,"erkek",250,0,makecol(255,255,255),-1);
                }
                if(cinsiyet==0)
                {
                        textout_ex(arakatman,font,"bayan",250,0,makecol(255,255,255),-1);
                }
				 ///////koltuk secimi algoritması/////////////////////
                /* seçim y ekseni koltuk baslangic 120
                         sıra1                 sıra2                 sıra3                 sıra4
                        710<x<750 758<x<798        854<x<894        904<x<944
                                1                        2                        3                        4
                */
                if((mouse_b & 1) && mouse_x>710 && mouse_x<750 && mouse_y>120 && mouse_y<500 && menu==1)
                {
                k=(mouse_y-80)/38;
                knum = 4*(k-1)+1;
                r= 51 + 38*(k-1);
                        ////koltuk bastırma////
                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,13,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,13,r,38,38);
								ksec=1;
                        }
                }
                if((mouse_b & 1) && mouse_x>758 && mouse_x<798 && mouse_y>120 && mouse_y<500 && menu==1)
                {
                k=(mouse_y-80)/38;
                knum = 4*(k-1)+2;
                r= 51 + 38*(k-1);

                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,62,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,62,r,38,38);
								ksec=1;
                        }
                }
                if((mouse_b & 1) && mouse_x>854 && mouse_x<894 && mouse_y>120 && mouse_y<280 && menu==1)
                {
                k=(mouse_y-80)/38;
                knum = 4*(k-1)+3;
                r= 51 + 38*(k-1);

                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,159,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,159,r,38,38);
								ksec=1;
                        }
                }

                if((mouse_b & 1) && mouse_x>904 && mouse_x<944 && mouse_y>120 && mouse_y<280 && menu==1)
                {
                k=(mouse_y - 80) /38;
                knum = 4*k;
                r= 51 + 38*(k-1);

                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,208,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,208,r,38,38);
								ksec=1;
                        }
                }
                ////////////orta kapidan sonra ////////////////////////
                if((mouse_b & 1) && mouse_x>854 && mouse_x<894 && mouse_y>310 && mouse_y<500 && menu==1)
                {
                k=(mouse_y-110)/38;
                knum = 4*(k-1)+3;
				r= 89 + 38*(k-1);

                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,159,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,159,r,38,38);
								ksec=1;
                        }
                }

                if((mouse_b & 1) && mouse_x>904 && mouse_x<944 && mouse_y>310 && mouse_y<500 && menu==1)
                {
                k=(mouse_y - 110) /38;
                knum = 4*k;
				r= 89 + 38*(k-1);

                        if(cinsiyet==1)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(ke,arakatman3,0,0,208,r,38,38);
								ksec=1;
                        }
                        if(cinsiyet==0)
                        {
								if(ksec==1)
								{
									 clear_to_color(arakatman3,makecol(29,29,29));
									 blit(oto,arakatman3,0,0,0,0,263,480);
									 ksec=0;
								}
                                blit(kb,arakatman3,0,0,208,r,38,38);
								ksec=1;
                        }
                }
	blit(ckatman,arakatman2,0,0,120,110,64,44);
	blit(arakatman3,arakatman2,0,0,500,0,263,480);
	blit(arakatman2,arakatman,0,0,195,60,760,480);
	blit(arakatman,screen,0,0,0,0,960,540);
}
Bitir();
return 0;
}
END_OF_MAIN()
 
void Baslat() {
int depth, res;
allegro_init();
depth = desktop_color_depth();
if (depth == 0) depth = 32;
set_color_depth(depth);
res = set_gfx_mode(GFX_AUTODETECT_WINDOWED, 960, 540, 0, 0);
if (res != 0) {
allegro_message(allegro_error);
exit(-1);
}
install_timer();
install_keyboard();
install_mouse();
 
}
void Bitir() {
clear_keybuf();
}
